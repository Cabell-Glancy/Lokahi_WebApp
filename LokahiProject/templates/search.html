{% load staticfiles %}
<!-- Include Required Prerequisites -->
<script type="text/javascript" src="//cdn.jsdelivr.net/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap/3/css/bootstrap.css" />

<!-- Include Date Range Picker -->
<script type="text/javascript" src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />
<html>
    <head>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="{% static 'css/reports.css' %}">
        <link href="//fonts.googleapis.com/css?family=Lobster&subset=latin,latin-ext" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div class="page-header">
            <a href="/LokahiApp/homepage"><h1>Lokahi FinTech</h1></a>
        </div>
        <div class="content container">
            <form method="POST" class="post-form">
            	{% csrf_token %}
                <div class="col-md-8">
                    <p>Search Request: <input type="text" name="search"/></p><br>
                    <p>Date Range:</p> <input type="text" name="datefilter" value="" />
                        <script type="text/javascript">
                        $(function() {
                          $('input[name="datefilter"]').daterangepicker({
                              autoUpdateInput: false,
                              locale: {
                                  cancelLabel: 'Clear'
                              }
                          });
                          $('input[name="datefilter"]').on('apply.daterangepicker', function(ev, picker) {
                              $(this).val(picker.startDate.format('YYYY-MM-DD') + ' - ' + picker.endDate.format('YYYY-MM-DD'));
                          });
                          $('input[name="datefilter"]').on('cancel.daterangepicker', function(ev, picker) {
                              $(this).val('');
                          });
                        });
                        </script>
                    <br>
                    <hr>
                    <button type="submit" name="Search" class="btn btn-default" value="Search">Search</button>
                    <a href="/LokahiApp/report"><button class="btn btn-default">Return</button></a>
                </div>
                    <div class="col-md-8">
                    	{% if search_results %}
                    	{{ search_results }}
                    	{% endif %}
                        {% if results.0.companyName %}
                        <div class="reports">
                            {% for result in results %}
                                <h3><a href="/LokahiApp/result/{{ result.id }}">{{ result.companyName }}</a></h3>
                                <p>{{ result.timestamp }}</p>
                                <p>{{ result.companyPhone }}</p>
                                <p>{{ result.sector }}</p>
                                <p>{{ result.industry }}</p>
                                <h3>{{ result.username }}</h3>
                            {% endfor %}
                        </div>
                        {% else %}
                            {{ results.0 }}
                        {% endif %}
                    </div>
            </form>
        </div>
    </body>
</html>